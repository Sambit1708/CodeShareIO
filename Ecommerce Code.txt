@Override
public FundDividendDetails getFundDividenedDetails(SvcFlowRequestWrapper requestWrapper) {

    log.info("Fetching Fund Dividend Details");

    int page = (Integer) requestWrapper.getQueryParams().get(RAConstants.PAGE) - 1;
    int size = (Integer) requestWrapper.getQueryParams().get(RAConstants.SIZE);
    String fundCode = (String) requestWrapper.getQueryParams().get(RAConstants.FUND_CODE);
    LocalDate cutoffLocalDate = calculateCutoffLocalDate(requestWrapper);
    LocalDate cuttOfLocalDatePlusOne = LocalDate.parse(
        fundCodeDividendUtils.getBusinessDateForGivenDate(cutoffLocalDate, "1", requestWrapper).toString()
    );

    // Fetch data using the custom query
    Page<FundDividenedAmount> fundDividenedAmountPage = fundDividendAmountRepository.findByFundCode(
            fundCode,
            PageRequest.of(page, size)
    );

    // Map entities to DTOs
    List<FundDividenedAmountDTO> dtoList = fundDividenedAmountPage.getContent()
            .stream()
            .map(entity -> {
                FundDividenedAmountDTO dto = new FundDividenedAmountDTO();
                dto.setUpdateDateTime(entity.getUpdateDateTime());
                dto.setUpdatedBy(entity.getUpdatedBy());
                dto.setFundCode(entity.getFundCode());
                dto.setProjectedRecordDate(entity.getProjectedRecordDate());
                dto.setPreviousValue(entity.getPreviousValue());
                dto.setNewValue(entity.getNewValue());
                dto.setRecordToEmpf(entity.getRecordToEmpf());
                return dto;
            })
            .collect(Collectors.toList());

    // Find the first business day and cut off datetime for current month
    Map<String, String> businessDayWithCutoffDateTime = fundCodeDividendUtils
            .calculateBusinessDayWithCutOffDateTime(requestWrapper);

    // Build response
    FundDividendDetailsResponseFields responseFields = new FundDividendDetailsResponseFields();
    responseFields.setPageNo(page + 1);
    responseFields.setPerPageResults(size);
    responseFields.setTotalResults((int) fundDividenedAmountPage.getTotalElements());
    responseFields.setResults(dtoList);
    responseFields.setProjectedRecordDate(cuttOfLocalDatePlusOne);
    responseFields.setCutoffDividendDateTime(businessDayWithCutoffDateTime.get(RAConstants.CUTOFF_DATE_TIME));

    FundDividendDetails fundDividendDetails = new FundDividendDetails();
    fundDividendDetails.setData(responseFields);
    fundDividendDetails.setApiCode(RAConstants.SUCEESS_CODE_200);

    return fundDividendDetails;
}
